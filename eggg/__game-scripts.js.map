{"version":3,"sources":["Scripts/orbit-camera.js","Scripts/mouse-input.js","Scripts/keyboard-input.js","Scripts/touch-input.js","Scripts/apply-outline.js","Scripts/click-to-highlight.js","Scripts/posteffect-outline.js","Scripts/slicer.js","Scripts/EnemyProto.js","Scripts/tower.js","Scripts/UI.js","Scripts/coop.js","Scripts/main.js","Scripts/summoner.js","Scripts/frag.js","Scripts/Turret.js","Scripts/feather.js"],"names":[],"mappings":"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","sourcesContent":["// orbit-camera.js\nvar OrbitCamera = pc.createScript('orbitCamera');\n\nOrbitCamera.attributes.add('distanceMax', {type: 'number', default: 0, title: 'Distance Max', description: 'Setting this at 0 will give an infinite distance limit'});\nOrbitCamera.attributes.add('distanceMin', {type: 'number', default: 0, title: 'Distance Min'});\nOrbitCamera.attributes.add('pitchAngleMax', {type: 'number', default: 90, title: 'Pitch Angle Max (degrees)'});\nOrbitCamera.attributes.add('pitchAngleMin', {type: 'number', default: -90, title: 'Pitch Angle Min (degrees)'});\n\nOrbitCamera.attributes.add('inertiaFactor', {\n    type: 'number',\n    default: 0,\n    title: 'Inertia Factor',\n    description: 'Higher value means that the camera will continue moving after the user has stopped dragging. 0 is fully responsive.'\n});\n\nOrbitCamera.attributes.add('focusEntity', {\n    type: 'entity',\n    title: 'Focus Entity',\n    description: 'Entity for the camera to focus on. If blank, then the camera will use the whole scene'\n});\n\nOrbitCamera.attributes.add('frameOnStart', {\n    type: 'boolean',\n    default: true,\n    title: 'Frame on Start',\n    description: 'Frames the entity or scene at the start of the application.\"'\n});\n\n\n// Property to get and set the distance between the pivot point and camera\n// Clamped between this.distanceMin and this.distanceMax\nObject.defineProperty(OrbitCamera.prototype, \"distance\", {\n    get: function() {\n        return this._targetDistance;\n    },\n\n    set: function(value) {\n        this._targetDistance = this._clampDistance(value);\n    }\n});\n\n\n// Property to get and set the pitch of the camera around the pivot point (degrees)\n// Clamped between this.pitchAngleMin and this.pitchAngleMax\n// When set at 0, the camera angle is flat, looking along the horizon\nObject.defineProperty(OrbitCamera.prototype, \"pitch\", {\n    get: function() {\n        return this._targetPitch;\n    },\n\n    set: function(value) {\n        this._targetPitch = this._clampPitchAngle(value);\n    }\n});\n\n\n// Property to get and set the yaw of the camera around the pivot point (degrees)\nObject.defineProperty(OrbitCamera.prototype, \"yaw\", {\n    get: function() {\n        return this._targetYaw;\n    },\n\n    set: function(value) {\n        this._targetYaw = value;\n\n        // Ensure that the yaw takes the shortest route by making sure that \n        // the difference between the targetYaw and the actual is 180 degrees\n        // in either direction\n        var diff = this._targetYaw - this._yaw;\n        var reminder = diff % 360;\n        if (reminder > 180) {\n            this._targetYaw = this._yaw - (360 - reminder);\n        } else if (reminder < -180) {\n            this._targetYaw = this._yaw + (360 + reminder);\n        } else {\n            this._targetYaw = this._yaw + reminder;\n        }\n    }\n});\n\n\n// Property to get and set the world position of the pivot point that the camera orbits around\nObject.defineProperty(OrbitCamera.prototype, \"pivotPoint\", {\n    get: function() {\n        return this._pivotPoint;\n    },\n\n    set: function(value) {\n        this._pivotPoint.copy(value);\n    }\n});\n\n\n// Moves the camera to look at an entity and all its children so they are all in the view\nOrbitCamera.prototype.focus = function (focusEntity) {\n    // Calculate an bounding box that encompasses all the models to frame in the camera view\n    this._buildAabb(focusEntity, 0);\n\n    var halfExtents = this._modelsAabb.halfExtents;\n\n    var distance = Math.max(halfExtents.x, Math.max(halfExtents.y, halfExtents.z));\n    distance = (distance / Math.tan(0.5 * this.entity.camera.fov * pc.math.DEG_TO_RAD));\n    distance = (distance * 2);\n\n    this.distance = distance;\n\n    this._pivotPoint.copy(this._modelsAabb.center);\n    \n    this._removeInertia();\n};\n\n\nOrbitCamera.distanceBetween = new pc.Vec3();\n\n// Set the camera position to a world position and look at a world position\n// Useful if you have multiple viewing angles to swap between in a scene\nOrbitCamera.prototype.resetAndLookAtPoint = function (resetPoint, lookAtPoint) {\n    this.pivotPoint.copy(lookAtPoint);\n    this.entity.setPosition(resetPoint);\n\n    this.entity.lookAt(lookAtPoint);\n\n    var distance = OrbitCamera.distanceBetween;\n    distance.sub2(lookAtPoint, resetPoint);\n    this.distance = distance.length();\n\n    this.pivotPoint.copy(lookAtPoint);\n\n    var cameraQuat = this.entity.getRotation();\n    this.yaw = this._calcYaw(cameraQuat);\n    this.pitch = this._calcPitch(cameraQuat, this.yaw);\n    \n   \n    this._updatePosition();\n};\n\n\n// Set camera position to a world position and look at an entity in the scene\n// Useful if you have multiple models to swap between in a scene\nOrbitCamera.prototype.resetAndLookAtEntity = function (resetPoint, entity) {\n    this._buildAabb(entity, 0);\n    this.resetAndLookAtPoint(resetPoint, this._modelsAabb.center);\n};\n\n\n// Set the camera at a specific, yaw, pitch and distance without inertia (instant cut)\nOrbitCamera.prototype.reset = function (yaw, pitch, distance) {\n\n    this.pitch = pitch;\n    this.yaw = yaw;\n    this.distance = distance;\n\n};\n\n/////////////////////////////////////////////////////////////////////////////////////////////\n// Private methods\n\nOrbitCamera.prototype.initialize = function () {\n    var self = this;\n    var onWindowResize = function () {\n        self._checkAspectRatio();\n    };\n\n    window.addEventListener('resize', onWindowResize, false);\n\n    this._checkAspectRatio();\n\n    // Find all the models in the scene that are under the focused entity\n    this._modelsAabb = new pc.BoundingBox();\n    this._buildAabb(this.focusEntity || this.app.root, 0);\n\n    this.entity.lookAt(this._modelsAabb.center);\n\n    this._pivotPoint = new pc.Vec3();\n    this._pivotPoint.copy(this._modelsAabb.center);\n\n    // Calculate the camera euler angle rotation around x and y axes\n    // This allows us to place the camera at a particular rotation to begin with in the scene\n    var cameraQuat = this.entity.getRotation();\n\n    // Preset the camera\n    this._yaw = this._calcYaw(cameraQuat);\n    this._pitch = this._clampPitchAngle(this._calcPitch(cameraQuat, this._yaw));\n    this.entity.setLocalEulerAngles(this._pitch, this._yaw, 0);\n\n    this._distance = 0;\n\n    this._targetYaw = this._yaw;\n    this._targetPitch = this._pitch;\n\n    // If we have ticked focus on start, then attempt to position the camera where it frames\n    // the focused entity and move the pivot point to entity's position otherwise, set the distance\n    // to be between the camera position in the scene and the pivot point\n    if (this.frameOnStart) {\n        this.focus(this.focusEntity || this.app.root);\n    } else {\n        var distanceBetween = new pc.Vec3();\n        distanceBetween.sub2(this.entity.getPosition(), this._pivotPoint);\n        this._distance = this._clampDistance(distanceBetween.length());\n    }\n\n    this._targetDistance = this._distance;\n\n    // Reapply the clamps if they are changed in the editor\n    this.on('attr:distanceMin', function (value, prev) {\n        this._targetDistance = this._clampDistance(this._distance);\n    });\n\n    this.on('attr:distanceMax', function (value, prev) {\n        this._targetDistance = this._clampDistance(this._distance);\n    });\n\n    this.on('attr:pitchAngleMin', function (value, prev) {\n        this._targetPitch = this._clampPitchAngle(this._pitch);\n    });\n\n    this.on('attr:pitchAngleMax', function (value, prev) {\n        this._targetPitch = this._clampPitchAngle(this._pitch);\n    });\n\n    // Focus on the entity if we change the focus entity\n    this.on('attr:focusEntity', function (value, prev) {\n        if (this.frameOnStart) {\n            this.focus(value || this.app.root);\n        } else {\n            this.resetAndLookAtEntity(this.entity.getPosition(), value || this.app.root);\n        }\n    });\n\n    this.on('attr:frameOnStart', function (value, prev) {\n        if (value) {\n            this.focus(this.focusEntity || this.app.root);\n        }\n    });\n\n    this.on('destroy', function() {\n        window.removeEventListener('resize', onWindowResize, false);\n    });\n};\n\n\nOrbitCamera.prototype.update = function(dt) {\n    // Add inertia, if any\n    var t = this.inertiaFactor === 0 ? 1 : Math.min(dt / this.inertiaFactor, 1);\n    this._distance = pc.math.lerp(this._distance, this._targetDistance, t);\n    this._yaw = pc.math.lerp(this._yaw, this._targetYaw, t);\n    this._pitch = pc.math.lerp(this._pitch, this._targetPitch, t);\n\n    this._updatePosition();\n};\n\n\nOrbitCamera.prototype._updatePosition = function () {\n    // Work out the camera position based on the pivot point, pitch, yaw and distance\n    this.entity.setLocalEulerAngles(this._pitch, this._yaw, 0);\n\n    var position = this.entity.getPosition();\n    position.copy(this.entity.forward);\n    position.scale(-this._distance);\n    position.add(this.pivotPoint);\n    this.entity.setPosition(position);\n};\n\n\nOrbitCamera.prototype._removeInertia = function () {\n    this._yaw = this._targetYaw;\n    this._pitch = this._targetPitch;\n    this._distance = this._targetDistance;\n};\n\n\nOrbitCamera.prototype._checkAspectRatio = function () {\n    var height = this.app.graphicsDevice.height;\n    var width = this.app.graphicsDevice.width;\n\n    // Match the axis of FOV to match the aspect ratio of the canvas so\n    // the focused entities is always in frame\n    this.entity.camera.horizontalFov = height > width;\n};\n\n\nOrbitCamera.prototype._buildAabb = function (entity, modelsAdded) {\n    var i = 0;\n\n    if (entity.model) {\n        var mi = entity.model.meshInstances;\n        if (mi) {\n            for (i = 0; i < mi.length; i++) {\n                if (modelsAdded === 0) {\n                    this._modelsAabb.copy(mi[i].aabb);\n                } else {\n                    this._modelsAabb.add(mi[i].aabb);\n                }\n\n                modelsAdded += 1;\n            }\n        }\n    }\n\n    for (i = 0; i < entity.children.length; ++i) {\n        modelsAdded += this._buildAabb(entity.children[i], modelsAdded);\n    }\n\n    return modelsAdded;\n};\n\n\nOrbitCamera.prototype._calcYaw = function (quat) {\n    var transformedForward = new pc.Vec3();\n    quat.transformVector(pc.Vec3.FORWARD, transformedForward);\n\n    return Math.atan2(-transformedForward.x, -transformedForward.z) * pc.math.RAD_TO_DEG;\n};\n\n\nOrbitCamera.prototype._clampDistance = function (distance) {\n    if (this.distanceMax > 0) {\n        return pc.math.clamp(distance, this.distanceMin, this.distanceMax);\n    } else {\n        return Math.max(distance, this.distanceMin);\n    }\n};\n\n\nOrbitCamera.prototype._clampPitchAngle = function (pitch) {\n    // Negative due as the pitch is inversed since the camera is orbiting the entity\n    return pc.math.clamp(pitch, -this.pitchAngleMax, -this.pitchAngleMin);\n};\n\n\nOrbitCamera.quatWithoutYaw = new pc.Quat();\nOrbitCamera.yawOffset = new pc.Quat();\n\nOrbitCamera.prototype._calcPitch = function(quat, yaw) {\n    var quatWithoutYaw = OrbitCamera.quatWithoutYaw;\n    var yawOffset = OrbitCamera.yawOffset;\n\n    yawOffset.setFromEulerAngles(0, -yaw, 0);\n    quatWithoutYaw.mul2(yawOffset, quat);\n\n    var transformedForward = new pc.Vec3();\n\n    quatWithoutYaw.transformVector(pc.Vec3.FORWARD, transformedForward);\n\n    return Math.atan2(transformedForward.y, -transformedForward.z) * pc.math.RAD_TO_DEG;\n};\n\n","// mouse-input.js\nvar MouseInput = pc.createScript('mouseInput');\n\nMouseInput.attributes.add('orbitSensitivity', {\n    type: 'number', \n    default: 0.3, \n    title: 'Orbit Sensitivity', \n    description: 'How fast the camera moves around the orbit. Higher is faster'\n});\n\nMouseInput.attributes.add('distanceSensitivity', {\n    type: 'number', \n    default: 0.15, \n    title: 'Distance Sensitivity', \n    description: 'How fast the camera moves in and out. Higher is faster'\n});\n\n// initialize code called once per entity\nMouseInput.prototype.initialize = function() {\n    \n    this.sceneOrbit = true;  \n    \n    this.orbitCamera = this.entity.script.orbitCamera;\n        \n    if (this.orbitCamera) {\n        var self = this;\n        \n        var onMouseOut = function (e) {\n           self.onMouseOut(e);\n        };\n        \n        this.app.mouse.on(pc.EVENT_MOUSEDOWN, this.onMouseDown, this);\n        this.app.mouse.on(pc.EVENT_MOUSEUP, this.onMouseUp, this);\n        this.app.mouse.on(pc.EVENT_MOUSEMOVE, this.onMouseMove, this);\n        this.app.mouse.on(pc.EVENT_MOUSEWHEEL, this.onMouseWheel, this);\n\n        // Listen to when the mouse travels out of the window\n        window.addEventListener('mouseout', onMouseOut, false);\n        \n        // Remove the listeners so if this entity is destroyed\n        this.on('destroy', function() {\n            this.app.mouse.off(pc.EVENT_MOUSEDOWN, this.onMouseDown, this);\n            this.app.mouse.off(pc.EVENT_MOUSEUP, this.onMouseUp, this);\n            this.app.mouse.off(pc.EVENT_MOUSEMOVE, this.onMouseMove, this);\n            this.app.mouse.off(pc.EVENT_MOUSEWHEEL, this.onMouseWheel, this);\n\n            window.removeEventListener('mouseout', onMouseOut, false);\n        });\n    }\n    \n    // Disabling the context menu stops the browser displaying a menu when\n    // you right-click the page\n    this.app.mouse.disableContextMenu();\n  \n    this.lookButtonDown = false;\n    this.panButtonDown = false;\n    this.lastPoint = new pc.Vec2();\n};\n\n\nMouseInput.fromWorldPoint = new pc.Vec3();\nMouseInput.toWorldPoint = new pc.Vec3();\nMouseInput.worldDiff = new pc.Vec3();\n\n\nMouseInput.prototype.pan = function(screenPoint) {\n    var fromWorldPoint = MouseInput.fromWorldPoint;\n    var toWorldPoint = MouseInput.toWorldPoint;\n    var worldDiff = MouseInput.worldDiff;\n    \n    // For panning to work at any zoom level, we use screen point to world projection\n    // to work out how far we need to pan the pivotEntity in world space \n    var camera = this.entity.camera;\n    var distance = this.orbitCamera.distance;\n    \n    camera.screenToWorld(screenPoint.x, screenPoint.y, distance, fromWorldPoint);\n    camera.screenToWorld(this.lastPoint.x, this.lastPoint.y, distance, toWorldPoint);\n\n    worldDiff.sub2(toWorldPoint, fromWorldPoint);\n       \n    this.orbitCamera.pivotPoint.add(worldDiff);    \n};\n\n\nMouseInput.prototype.onMouseDown = function (event) {\n    if(this.sceneOrbit === true){\n    switch (event.button) {\n        case pc.MOUSEBUTTON_LEFT: {\n            this.lookButtonDown = true;\n        } break;\n            \n        case pc.MOUSEBUTTON_MIDDLE: \n        case pc.MOUSEBUTTON_RIGHT: {\n            this.panButtonDown = true;\n        } break;\n    }\n    }\n};\n\n\nMouseInput.prototype.onMouseUp = function (event) {\n    switch (event.button) {\n        case pc.MOUSEBUTTON_LEFT: {\n            this.lookButtonDown = false;\n        } break;\n            \n        case pc.MOUSEBUTTON_MIDDLE: \n        case pc.MOUSEBUTTON_RIGHT: {\n            this.panButtonDown = false;            \n        } break;\n    }\n};\n\n\nMouseInput.prototype.onMouseMove = function (event) {    \n    var mouse = pc.app.mouse;\n    if (this.lookButtonDown) {\n        this.orbitCamera.pitch -= event.dy * this.orbitSensitivity;\n        this.orbitCamera.yaw -= event.dx * this.orbitSensitivity;\n        \n    } else if (this.panButtonDown) {\n        this.pan(event);   \n    }\n    \n    this.lastPoint.set(event.x, event.y);\n};\n\n\nMouseInput.prototype.onMouseWheel = function (event) {\n    this.orbitCamera.distance -= event.wheel * this.distanceSensitivity * (this.orbitCamera.distance * 0.1);\n    event.event.preventDefault();\n};\n\n\nMouseInput.prototype.onMouseOut = function (event) {\n    this.lookButtonDown = false;\n    this.panButtonDown = false;\n};\n\n","// keyboard-input.js\nvar KeyboardInput = pc.createScript('keyboardInput');\n\n// initialize code called once per entity\nKeyboardInput.prototype.initialize = function() {\n    this.orbitCamera = this.entity.script.orbitCamera;\n};\n\n\nKeyboardInput.prototype.postInitialize = function() {\n    if (this.orbitCamera) {\n        this.startDistance = this.orbitCamera.distance;\n        this.startYaw = this.orbitCamera.yaw;\n        this.startPitch = this.orbitCamera.pitch;\n        this.startPivotPosition = this.orbitCamera.pivotPoint.clone();\n    }\n};\n\n// update code called every frame\nKeyboardInput.prototype.update = function(dt) {\n    if (this.orbitCamera) {\n        if (this.app.keyboard.wasPressed(pc.KEY_SPACE)) {\n            this.orbitCamera.reset(this.startYaw, this.startPitch, this.startDistance);\n            this.orbitCamera.pivotPoint = this.startPivotPosition;\n        }\n    }\n};\n\n\n","// touch-input.js\nvar TouchInput = pc.createScript('touchInput');\n\nTouchInput.attributes.add('orbitSensitivity', {\n    type: 'number', \n    default: 0.4, \n    title: 'Orbit Sensitivity', \n    description: 'How fast the camera moves around the orbit. Higher is faster'\n});\n\nTouchInput.attributes.add('distanceSensitivity', {\n    type: 'number', \n    default: 0.2, \n    title: 'Distance Sensitivity', \n    description: 'How fast the camera moves in and out. Higher is faster'\n});\n\n// initialize code called once per entity\nTouchInput.prototype.initialize = function() {\n    this.sceneOrbit = true;\n    this.orbitCamera = this.entity.script.orbitCamera;\n    \n    // Store the position of the touch so we can calculate the distance moved\n    this.lastTouchPoint = new pc.Vec2();\n    this.lastPinchMidPoint = new pc.Vec2();\n    this.lastPinchDistance = 0;\n    \n    if (this.orbitCamera && this.app.touch) {\n        // Use the same callback for the touchStart, touchEnd and touchCancel events as they \n        // all do the same thing which is to deal the possible multiple touches to the screen\n        this.app.touch.on(pc.EVENT_TOUCHSTART, this.onTouchStartEndCancel, this);\n        this.app.touch.on(pc.EVENT_TOUCHEND, this.onTouchStartEndCancel, this);\n        this.app.touch.on(pc.EVENT_TOUCHCANCEL, this.onTouchStartEndCancel, this);\n        \n        this.app.touch.on(pc.EVENT_TOUCHMOVE, this.onTouchMove, this);\n        \n        this.on('destroy', function() {\n            this.app.touch.off(pc.EVENT_TOUCHSTART, this.onTouchStartEndCancel, this);\n            this.app.touch.off(pc.EVENT_TOUCHEND, this.onTouchStartEndCancel, this);\n            this.app.touch.off(pc.EVENT_TOUCHCANCEL, this.onTouchStartEndCancel, this);\n\n            this.app.touch.off(pc.EVENT_TOUCHMOVE, this.onTouchMove, this);\n        });\n    }\n};\n\n\nTouchInput.prototype.getPinchDistance = function (pointA, pointB) {\n    // Return the distance between the two points\n    var dx = pointA.x - pointB.x;\n    var dy = pointA.y - pointB.y;    \n    \n    return Math.sqrt((dx * dx) + (dy * dy));\n};\n\n\nTouchInput.prototype.calcMidPoint = function (pointA, pointB, result) {\n    result.set(pointB.x - pointA.x, pointB.y - pointA.y);\n    result.scale(0.5);\n    result.x += pointA.x;\n    result.y += pointA.y;\n};\n\n\nTouchInput.prototype.onTouchStartEndCancel = function(event) {\n    // We only care about the first touch for camera rotation. As the user touches the screen, \n    // we stored the current touch position\n    var touches = event.touches;\n    if (touches.length == 1) {\n        this.lastTouchPoint.set(touches[0].x, touches[0].y);\n    \n    } else if (touches.length == 2) {\n        // If there are 2 touches on the screen, then set the pinch distance\n        this.lastPinchDistance = this.getPinchDistance(touches[0], touches[1]);\n        this.calcMidPoint(touches[0], touches[1], this.lastPinchMidPoint);\n    }\n};\n\n\nTouchInput.fromWorldPoint = new pc.Vec3();\nTouchInput.toWorldPoint = new pc.Vec3();\nTouchInput.worldDiff = new pc.Vec3();\n\n\nTouchInput.prototype.pan = function(midPoint) {\n    var fromWorldPoint = TouchInput.fromWorldPoint;\n    var toWorldPoint = TouchInput.toWorldPoint;\n    var worldDiff = TouchInput.worldDiff;\n    \n    // For panning to work at any zoom level, we use screen point to world projection\n    // to work out how far we need to pan the pivotEntity in world space \n    var camera = this.entity.camera;\n    var distance = this.orbitCamera.distance;\n    \n    camera.screenToWorld(midPoint.x, midPoint.y, distance, fromWorldPoint);\n    camera.screenToWorld(this.lastPinchMidPoint.x, this.lastPinchMidPoint.y, distance, toWorldPoint);\n    \n    worldDiff.sub2(toWorldPoint, fromWorldPoint);\n     \n    this.orbitCamera.pivotPoint.add(worldDiff);    \n};\n\n\nTouchInput.pinchMidPoint = new pc.Vec2();\n\nTouchInput.prototype.onTouchMove = function(event) {\n    \n    if(this.sceneOrbit === true){\n    var pinchMidPoint = TouchInput.pinchMidPoint;\n    \n    // We only care about the first touch for camera rotation. Work out the difference moved since the last event\n    // and use that to update the camera target position \n    var touches = event.touches;\n    if (touches.length == 1) {\n        var touch = touches[0];\n        \n        this.orbitCamera.pitch -= (touch.y - this.lastTouchPoint.y) * this.orbitSensitivity;\n        this.orbitCamera.yaw -= (touch.x - this.lastTouchPoint.x) * this.orbitSensitivity;\n        \n        this.lastTouchPoint.set(touch.x, touch.y);\n    \n    } else if (touches.length == 2) {\n        // Calculate the difference in pinch distance since the last event\n        var currentPinchDistance = this.getPinchDistance(touches[0], touches[1]);\n        var diffInPinchDistance = currentPinchDistance - this.lastPinchDistance;\n        this.lastPinchDistance = currentPinchDistance;\n                \n        this.orbitCamera.distance -= (diffInPinchDistance * this.distanceSensitivity * 0.1) * (this.orbitCamera.distance * 0.1);\n        \n        // Calculate pan difference\n        this.calcMidPoint(touches[0], touches[1], pinchMidPoint);\n        this.pan(pinchMidPoint);\n        this.lastPinchMidPoint.copy(pinchMidPoint);\n    }\n}\n};\n\n\n","// apply-outline.js\nvar ApplyOutline = pc.createScript('applyOutline');\n\nApplyOutline.attributes.add('color', { type: 'rgba' });\nApplyOutline.attributes.add(\"thickness\", {\n  type: \"number\",\n  default: 1.0,\n  min: 1.0,\n  max: 10,\n  precision: 0,\n  title: \"Thickness\"\n});\n\n// initialize code called once per entity\nApplyOutline.prototype.initialize = function() {\n  \n    // --- variables\n    this.vec = new pc.Vec3();\n    \n    // --- execute\n    this.prepare();\n    \n    // --- events\n    window.addEventListener(\"resize\", this.onResize.bind(this) );\n    \n    this.app.on('Ermis:objectOutline:add', function(entity){\n\n        if( entity && entity.model && entity.model.layers.indexOf(this.outlineLayer.id) === -1 ){\n            \n            var layers = entity.model.layers.slice();\n            layers.push(this.outlineLayer.id);\n            \n            entity.model.layers = layers;\n        }\n        \n    }, this);\n    \n    this.app.on('Ermis:objectOutline:remove', function(entity){\n        if (entity && entity.model) {\n        \n        var index = entity.model.layers.indexOf(this.outlineLayer.id);\n        \n        if(index > -1 ){\n            \n            var layers = entity.model.layers.slice();\n            layers.splice(index, 1);\n            \n            entity.model.layers = layers;\n        }\n    }\n        \n    }, this);\n};\n\nApplyOutline.prototype.prepare = function() {\n    \n    // create texture and render target for rendering into, including depth buffer\n    this.texture = new pc.Texture(this.app.graphicsDevice, {\n        width: this.app.graphicsDevice.width * 2,\n        height: this.app.graphicsDevice.height * 2,\n        format: pc.PIXELFORMAT_R8_G8_B8_A8,\n        autoMipmap: true,\n        minFilter: pc.FILTER_LINEAR,\n        magFilter: pc.FILTER_LINEAR\n    });\n    //this.renderTarget = new pc.RenderTarget(this.app.graphicsDevice, this.texture, { depth: true });\n    this.renderTarget = new pc.RenderTarget({ \n        colorBuffer: this.texture,\n        depth: true,\n        samples: 8\n    });\n\n    // get layers\n    this.worldLayer = this.app.scene.layers.getLayerByName(\"World\");    \n    this.outlineLayer = this.app.scene.layers.getLayerByName(\"OutlineLayer\");    \n\n    // set up layer to render to the render target\n    this.outlineLayer.renderTarget = this.renderTarget;\n    \n    // Create outline camera, which renders entities in outline layer\n    this.outlineCamera = new pc.Entity();\n    this.outlineCamera.addComponent(\"camera\", {\n        clearColor: new pc.Color(0.0, 0.0, 0.0, 0.0),\n        layers: [this.outlineLayer.id],\n        fov: this.app.root.findByName('Camera').camera.fov\n    });\n    this.app.root.addChild(this.outlineCamera);    \n    this.outlineCamera.camera.priority = 0;\n    \n    // instanciate outline post process effect\n    this.outline = new pc.OutlineEffect(this.app.graphicsDevice, this.thickness);\n    this.outline.color = new pc.Color(0, 0, 1, 1);\n    this.outline.texture = this.texture;\n    this.entity.camera.postEffects.addEffect(this.outline);\n};\n\nApplyOutline.prototype.onResize = function(){\n\n    this.entity.camera.postEffects.removeEffect(this.outline);\n\n    this.app.scene.layers.remove(this.outlineLayer);\n    \n    this.texture.destroy();\n    this.texture = new pc.Texture(this.app.graphicsDevice, {\n        width: this.app.graphicsDevice.width,\n        height: this.app.graphicsDevice.height,\n        format: pc.PIXELFORMAT_R8_G8_B8_A8,\n        autoMipmap: true,\n        minFilter: pc.FILTER_LINEAR,\n        magFilter: pc.FILTER_LINEAR\n    });\n    this.renderTarget.destroy();\n    this.renderTarget = new pc.RenderTarget(this.app.graphicsDevice, this.texture, { depth: true });\n    this.outlineLayer.renderTarget = this.renderTarget;\n\n    this.app.scene.layers.insert(this.outlineLayer, 0);\n\n    this.outline.texture = this.texture;\n    this.entity.camera.postEffects.addEffect(this.outline);\n};\n\n// update code called every frame\nApplyOutline.prototype.update = function(dt) {\n        \n    var transform = this.entity.getWorldTransform();\n\n    this.outlineCamera.setPosition(transform.getTranslation());        \n    this.outlineCamera.setEulerAngles(transform.getEulerAngles());\n    this.outlineCamera.setLocalScale(transform.getScale());\n    \n    this.outlineCamera.camera.horizontalFov = this.app.graphicsDevice.width > this.app.graphicsDevice.height ? false : true;\n    \n    // update color\n    this.outline.color.copy(this.color);\n};\n\n","// click-to-highlight.js\nvar ClickToHighlight = pc.createScript('clickToHighlight');\n\n\n// initialize code called once per entity\nClickToHighlight.prototype.initialize = function() {\n\n    // --- variables\n    this.cameraEntity = this.entity;\n    this.previous = undefined;\n    this.interval = 0;\n    \n    // Add touch event only if touch is available\n    if (this.app.touch) {\n        this.app.touch.on(pc.EVENT_TOUCHSTART, this.touchStart, this);\n    }\n    else{    \n        // Add a mousedown event handler\n        this.app.mouse.on(pc.EVENT_MOUSEDOWN, this.mouseDown, this);        \n    }\n};\n\nClickToHighlight.prototype.update = function(dt) {\n    if (this.interval > 0) {\n        this.interval -= 1;\n    }\n};\n\nClickToHighlight.prototype.setInterval = function() {\n    this.interval = 15; \n};\n\n\nClickToHighlight.prototype.mouseDown = function (e) {\n    if (e.button == 2) {\n        this.doRaycast(e);  \n    }\n};\n\nClickToHighlight.prototype.touchStart = function (e) {\n    // Only perform the raycast if there is one finger on the screen\n    if (e.touches.length == 1) {\n        if (this.interval > 0) {\n            this.doRaycast(e.touches[0]);  \n        }\n        else{\n           this.setInterval();\n        }\n        \n    }\n    e.event.preventDefault();\n};\n\nClickToHighlight.prototype.doRaycast = function (screenPosition) {\n    // The vec3 to raycast from\n    var from = this.cameraEntity.getPosition();\n    // The vec3 to raycast to \n    var to = this.cameraEntity.camera.screenToWorld(screenPosition.x, screenPosition.y, this.cameraEntity.camera.farClip*100);\n\n    // Raycast between the two points\n    var results = this.app.systems.rigidbody.raycastAll(from, to);\n    \n    var result = null;\n    \n    var dist = 1000;\n    for(var i in results){\n        if (results[i].entity.tags.has('no-select') === false){\n            if (results[i].entity.getPosition().distance(this.cameraEntity.getPosition()) < dist){\n                result = results[i];\n                dist = results[i].entity.getPosition().distance(this.cameraEntity.getPosition());\n            }   \n        }\n    }\n    \n    // If there was a hit, store the entity\n    if (result && result.entity && result.entity.script) {   \n        this.focusEntity(result.entity);       \n    }\n    else{\n        \n        if(this.previous){\n            this.app.fire('Ermis:objectOutline:remove', this.previous);\n            for (var e in this.previous.children){\n                this.app.fire('Ermis:objectOutline:remove', this.previous.children[e]); \n            }\n\n            this.app.root.findByName('UI').script.ui.displayObject(null);\n            this.entity.script.orbitCamera.reset(this.entity.script.orbitCamera.yaw,-90,80);\n            this.previous = undefined;\n        }        \n    }\n};\n\n\nClickToHighlight.prototype.focusEntity = function (entity) {\n    \n    // If there was a hit, store the entity \n        if (this.app.root.findByTag(\"no-select\").indexOf(entity) > -1) {\n            if(this.previous){\n                this.app.fire('Ermis:objectOutline:remove', this.previous);\n                for (var a in this.previous.children){\n                    this.app.fire('Ermis:objectOutline:remove', this.previous.children[a]); \n                }\n\n                this.app.root.findByName('UI').script.ui.displayObject(null);\n                this.entity.script.orbitCamera.reset(this.entity.script.orbitCamera.yaw,-90,80);\n                this.previous = undefined;\n            }   \n        }\n        else {\n\n            this.app.fire('Ermis:objectOutline:add', entity);\n            for (var c in entity.children){\n               this.app.fire('Ermis:objectOutline:add', entity.children[c]); \n            }\n            \n            this.entity.script.orbitCamera.focus(entity);\n        \n            if( this.previous && this.previous._guid !== entity._guid){\n                this.app.fire('Ermis:objectOutline:remove', this.previous);\n                for (var d in this.previous.children){\n                    this.app.fire('Ermis:objectOutline:remove', this.previous.children[d]); \n                }\n            }\n            this.previous = entity;\n            this.app.root.findByName('UI').script.ui.displayObject(entity);\n        }\n    \n};\n\n","// posteffect-outline.js\n// --------------- POST EFFECT DEFINITION --------------- //\nObject.assign(pc, function () {\n\n    /**\n     * @class\n     * @name pc.OutlineEffect\n     * @classdesc Applies an outline effect on input render target\n     * @description Creates new instance of the post effect.\n     * @augments pc.PostEffect\n     * @param {pc.GraphicsDevice} graphicsDevice - The graphics device of the application.\n     * @property {pc.Texture} texture The outline texture to use.\n     * @property {pc.Color} color The outline color.\n     */\n    var OutlineEffect = function (graphicsDevice, thickness) {\n        pc.PostEffect.call(this, graphicsDevice);\n\n        this.shader = new pc.Shader(graphicsDevice, {\n            attributes: {\n                aPosition: pc.SEMANTIC_POSITION\n            },\n            vshader: [\n                \"attribute vec2 aPosition;\",\n                \"\",\n                \"varying vec2 vUv0;\",\n                \"\",\n                \"void main(void)\",\n                \"{\",\n                \"    gl_Position = vec4(aPosition, 0.0, 1.0);\",\n                \"    vUv0 = (aPosition.xy + 1.0) * 0.5;\",\n                \"}\"\n            ].join(\"\\n\"),\n            fshader: [\n                \"precision \" + graphicsDevice.precision + \" float;\",\n                \"\",\n                \"#define THICKNESS \"+thickness.toFixed(0),\n                \"uniform float uWidth;\",\n                \"uniform float uHeight;\",\n                \"uniform vec4 uOutlineCol;\",\n                \"uniform sampler2D uColorBuffer;\",\n                \"uniform sampler2D uOutlineTex;\",\n                \"\",\n                \"varying vec2 vUv0;\",\n                \"\",\n                \"void main(void)\",\n                \"{\",\n                \"    vec4 texel1 = texture2D(uColorBuffer, vUv0);\",\n                \"    float sample0 = texture2D(uOutlineTex, vUv0).a;\",\n                \"    float outline = 0.0;\",\n                \"    if (sample0==0.0)\",\n                \"    {\",\n                \"        for (int x=-THICKNESS;x<=THICKNESS;x++)\",\n                \"        {\",\n                \"            for (int y=-THICKNESS;y<=THICKNESS;y++)\",\n                \"            {    \",\n                \"                float sample=texture2D(uOutlineTex, vUv0+vec2(float(x)/uWidth, float(y)/uHeight)).a;\",\n                \"                if (sample>0.0)\",\n                \"                {\",\n                \"                    outline=1.0;\",\n                \"                }\",\n                \"            }\",\n                \"        } \",\n                \"    }\",\n                \"    gl_FragColor = mix(texel1, uOutlineCol, outline * uOutlineCol.a);\",\n                \"}\"\n            ].join(\"\\n\")\n        });\n\n        // Uniforms\n        this.color = new pc.Color(1, 1, 1, 1);\n        this.texture = new pc.Texture(graphicsDevice);\n        this.texture.name = 'pe-outline';\n    };\n\n    OutlineEffect.prototype = Object.create(pc.PostEffect.prototype);\n    OutlineEffect.prototype.constructor = OutlineEffect;\n    \n    var colorArray = [0,0,0,0];\n\n    Object.assign(OutlineEffect.prototype, {\n        render: function (inputTarget, outputTarget, rect) {\n            var device = this.device;\n            var scope = device.scope;\n\n            scope.resolve(\"uWidth\").setValue(inputTarget.width);\n            scope.resolve(\"uHeight\").setValue(inputTarget.height);\n            \n            colorArray[0] = this.color.r;\n            colorArray[1] = this.color.g;\n            colorArray[2] = this.color.b;\n            colorArray[3] = this.color.a;\n            scope.resolve(\"uOutlineCol\").setValue(colorArray);\n            \n            scope.resolve(\"uColorBuffer\").setValue(inputTarget.colorBuffer);\n            scope.resolve(\"uOutlineTex\").setValue(this.texture);\n            pc.drawFullscreenQuad(device, outputTarget, this.vertexBuffer, this.shader, rect);\n        }\n    });\n\n    return {\n        OutlineEffect: OutlineEffect\n    };\n}());\n\n// ----------------- SCRIPT DEFINITION ------------------ //\nvar Outline = pc.createScript('outline');\n\nOutline.attributes.add('color', {\n    type: 'rgb',\n    default: [0.5, 0.5, 0.5, 1],\n    title: 'Color'\n});\n\nOutline.attributes.add('texture', {\n    type: 'asset',\n    assetType: 'texture',\n    title: 'Texture'\n});\n\nOutline.prototype.initialize = function () {\n    this.effect = new pc.OutlineEffect(this.app.graphicsDevice);\n    this.effect.color = this.color;\n    this.effect.texture = this.texture.resource;\n\n    var queue = this.entity.camera.postEffects;\n\n    queue.addEffect(this.effect);\n\n    this.on('state', function (enabled) {\n        if (enabled) {\n            queue.addEffect(this.effect);\n        } else {\n            queue.removeEffect(this.effect);\n        }\n    });\n\n    this.on('destroy', function () {\n        queue.removeEffect(this.effect);\n    });\n\n    this.on('attr:color', function (value) {\n        this.effect.color = value;\n    }, this);\n\n    this.on('attr:texture', function (value) {\n        this.effect.texture = value ? value.resource : null;\n    }, this);\n};\n\n\n","// slicer.js\nvar Slicer = pc.createScript('slicer');\n\n\n// initialize code called once per entity\nSlicer.prototype.initialize = function() {\n    this.fireTime = 0;\n    this.bullet = [];\n    this.entity.children[1].animation.play(\"Slicer Idle\");\n    this.entity.children[1].animation.loop = true;\n    this.entity.on('upgrade', this.checkUpgrades, this);\n    this.entity.script.tower.setUp({fireRate: 0.75, radius: 40, damage: 120});\n    this.fthr = \"none\";\n    \n};\n\n// update code called every frame\nSlicer.prototype.update = function(dt) {\n    var startColor = new pc.Color(1, 1, 1);\n    var endColor = new pc.Color(1, 1, 1);\n    \n    if (this.fireTime < 0){\n        if (this.entity.script.tower.engageList.length > 0) {\n            \n            this.entity.script.tower.engaged = true;\n            var pos = this.entity.script.tower.engageList[this.entity.script.tower.engageList.length-1].getLocalPosition();\n            this.entity.children[1].lookAt(pos.x, this.entity.getLocalPosition().y-1, pos.z); \n            this.entity.children[1].animation.play(\"Slicer Fire\");\n            this.entity.sound.play(\"Slot 1\");\n            this.bullet = this.fireRound();\n            this.resetFire();\n        }\n        \n        else{\n        if (this.entity.script.tower.engaged === true){\n            this.entity.script.tower.engaged = false;\n            this.resetFire();\n            }\n        }\n    }\n    \n    else{\n        this.fireTime -= dt;\n    }\n    \n    \n};\n\n\nSlicer.prototype.fireRound = function() {\n   for (var x = 1; x < 4; x++)\n    {\n        var templateAsset = this.app.assets.get(52300348);\n        var instance = templateAsset.resource.instantiate();\n        instance.setPosition(this.entity.findByName('Target').getPosition());\n        instance.setEulerAngles(this.entity.findByName('Target').getEulerAngles().x, (this.entity.findByName('Target').getEulerAngles().y-20) + (x*20), this.entity.findByName('Target').getEulerAngles().z);\n        instance.translateLocal(0, -1, 0);\n        this.app.root.addChild(instance);\n        if(this.pierce){\n            instance.children[0].model.meshInstances[0].material = this.app.assets.get(52214437).resource;\n            instance.script.feather.hitCount = 1;\n        }\n        instance.script.feather.damage = this.entity.script.tower.damage;\n        instance.script.feather.initEntity = this.entity;\n        instance.script.feather.behavior = this.fthr;\n        if(this.farther){\n            instance.script.feather.scale = 1.7;\n            instance.script.feather.duration = 0.9;\n            this.limit = 0.7; \n        }\n        \n    }\n};\n\nSlicer.prototype.resetFire = function() {\n    if (this.entity.script.tower.engaged === true){\n        this.entity.children[1].animation.speed = this.entity.script.tower.fireRate;\n        this.entity.children[1].animation.loop = false;\n        this.fireTime = this.entity.children[1].animation.duration / this.entity.script.tower.fireRate;\n    }\n    if (this.entity.script.tower.engaged === false){\n        if (this.accelerometer){\n            this.entity.script.tower.fireRate = this.accelerometer.base;\n        }\n        this.entity.children[1].animation.speed = 1;\n        this.entity.children[1].animation.loop = true;\n        this.entity.children[1].animation.play(\"Slicer Idle\");\n        this.fireTime = 0;\n    }\n\n};\n\nSlicer.prototype.checkUpgrades = function() {\n    \n    if (this.entity.script.tower.configMain.upgrades[3].owned === true){\n        this.entity.children[1].model.asset = this.app.assets.get(64966459);\n        this.entity.children[1].model.meshInstances[1].material = this.app.assets.get(52248429).resource;\n        this.fthr = \"return\";\n    }\n    if (this.entity.script.tower.configMain.upgrades[4].owned === true){\n        this.entity.children[1].model.asset = this.app.assets.get(64966459);\n        this.entity.children[1].model.meshInstances[1].material = this.app.assets.get(52214437).resource;\n        this.fthr = \"fork\";\n    }\n    \n    if (this.entity.script.tower.configMain.upgrades[0].owned === true){\n        this.entity.children[1].model.meshInstances[4].material = this.app.assets.get(52216574).resource;\n        this.entity.script.tower.fireRate = 1.3;\n    }\n    if (this.entity.script.tower.configMain.upgrades[1].owned === true){\n        this.entity.children[1].model.meshInstances[5].material = this.app.assets.get(52291372).resource;\n        this.farther = true;\n    }\n    if (this.entity.script.tower.configMain.upgrades[2].owned === true){\n        this.entity.children[1].model.meshInstances[6].material = this.app.assets.get(51881129).resource;\n        this.pierce = true;\n    }\n\n};\n\n\n\n\n\n\n// swap method called for script hot-reloading\n// inherit your script state here\n// SlicerEngage.prototype.swap = function(old) { };\n\n// to learn more about script anatomy, please read:\n// https://developer.playcanvas.com/en/user-manual/scripting/\n\n// initialize code called once per entity\n\n\n","// EnemyProto.js\nvar EnemyProto = pc.createScript('enemyProto');\n\nEnemyProto.attributes.add(\"class\", {type: \"string\"});\nEnemyProto.attributes.add(\"callName\", {type: \"string\"});\n\nEnemyProto.attributes.add(\"speed\", {type: \"number\", default: 50});\nEnemyProto.attributes.add(\"harm\", {type: \"number\", default: 5});\n\nEnemyProto.attributes.add(\"defense\", {type: \"number\", default: 0});\nEnemyProto.attributes.add(\"immunities\", {type: \"string\", array: true});\n\nEnemyProto.attributes.add(\"worth\", {type: \"number\", default: 20});\n\nEnemyProto.attributes.add(\"configFile\", {type: \"asset\"});\n\n// initialize code called once per entity\nEnemyProto.prototype.initialize = function() {\n    if (this.configFile){\n        this.config = JSON.parse(this.configFile.resources[0]);\n    }\n    \n    this.damagedInterval = 0;\n    this.force = new pc.Vec3();\n    this.damagedBy = null;\n    this.health = 100;\n\n    this.entity.findByName('Core').collision.on('contact', this.contact, this);\n    this.effects = {slow: 0, rot: 0};\n    \n    this.init(this.callName);\n    \n};\n\n//Update the enemy's properties\nEnemyProto.prototype.init = function(property) {  \n    if (this.config[property]){\n        var info = this.config[property];\n        \n        this.initProto(info.proto);\n        \n        this.class = info.class;\n        \n        this.speed = info.speed;\n        this.harm = info.harm;\n        \n        this.defense = info.defense;\n        this.immunities = info.immunities;\n        \n        this.worth = info.worth;\n        \n        if(info.splitter){\n            this.entity.on(\"death\", function (){\n                this.splitter(info.splitter, info.proto.height);\n            }, this);\n        }\n    }\n};\n\n//Update the enemy's look\nEnemyProto.prototype.initProto = function(proto) {\n    this.entity.collision.halfExtents = new pc.Vec3(proto.boundingBox.x, proto.boundingBox.y, proto.boundingBox.z);\n    var dist = this.entity.up.clone().scale(proto.height);\n    this.entity.rigidbody.teleport(this.entity.getPosition().add(dist));\n    this.entity.findByName(\"Core\").rigidbody.teleport(this.entity.getPosition().sub(dist));\n    this.entity.findByName(\"Group\").translateLocal(0, proto.uiOffset, 0);\n    \n    this.entity.findByName(\"Entity\").model.asset = this.app.assets.get(proto.model);\n    for (var x of proto.matOverrides){\n        this.entity.findByName(\"Entity\").model.meshInstances[x[0]].material = this.app.assets.get(x[1]).resource;\n    }\n    \n    this.entity.findByName(\"Entity\").animation.animations = {\"Movement\": this.app.assets.get(proto.anim).resource};\n    \n    if(proto.animSpeed){\n        this.entity.findByName(\"Entity\").animation.speed = proto.animSpeed;\n    }\n    \n};\n\n    \nEnemyProto.prototype.initProto2 = function(proto) {\n    this.entity.collision.halfExtents = new pc.Vec3(proto.boundingBox.x, proto.boundingBox.y, proto.boundingBox.z);\n    var dist = this.entity.up.clone().scale(proto.height);\n    this.entity.rigidbody.teleport(this.entity.getPosition().add(dist));\n    this.entity.findByName(\"Core\").rigidbody.teleport(this.entity.getPosition().sub(dist));\n    this.entity.findByName(\"Group\").translateLocal(0, proto.uiOffset, 0);\n    \n    this.entity.findByName(\"Entity\").model.asset = this.app.assets.get(proto.model);\n    for (var x of proto.matOverrides){\n        this.entity.findByName(\"Entity\").model.meshInstances[x[0]].material = this.app.assets.get(x[1]).resource;\n    }\n    \n    this.entity.findByName(\"Entity\").animation.animations = {\"Movement\": this.app.assets.get(proto.anim).resource};\n    \n    if(proto.animSpeed){\n        this.entity.findByName(\"Entity\").animation.speed = proto.animSpeed;\n    }\n    \n};\n\n\n// update code called every frame\nEnemyProto.prototype.update = function(dt) {\n    this.health = pc.math.clamp(this.health, 0, 100);\n    var target = this.app.root.findByName('Coop').getPosition();\n    this.entity.findByName('Group').lookAt(this.app.root.findByName('Camera').getPosition());\n    \n    var speed = this.speed;\n    if (this.effects.slow > 0){\n        speed /= 2.4;\n    } \n    \n    this.forceVal = this.entity.forward.clone().scale(speed/100);\n    this.entity.rigidbody.teleport(this.entity.getPosition().add(this.forceVal));\n    \n    this.entity.findByName('Progress').element.width = (this.health/100)*3;\n    \n    for (var property in this.effects) {\n        if(this.effects[property] > 0){this.effects[property] -= dt;}\n    }\n       \n    if (this.health < 1){\n        this.app.root.findByName('Coop').script.coop.tokenADD(this.worth);\n        this.end();\n    }\n    \n    if (this.effects.rot > 0){\n        this.health -= 0.3;\n    }\n     \n};\n\n\n\nEnemyProto.prototype.applyDamage = function(amount, entity) {\n    this.damagedInterval = 0.1;\n    this.health -= amount - (amount*(this.defense/100));\n    this.damagedBy = entity;\n\n};\n\nEnemyProto.prototype.end = function() {\n    if(this.damagedBy){this.damagedBy.fire('killCount');}\n    this.entity.fire(\"death\");\n    this.entity.destroy();\n};\n\nEnemyProto.prototype.applyEffect = function(effect, entity) {\n    this.damagedBy = entity;\n    if (effect.name == 'slow'){\n        this.effects.slow = effect.duration;\n    }\n    if (effect.name == 'rot'){\n        this.effects.rot = effect.duration;\n    }\n\n};\n\nEnemyProto.prototype.contact = function(entity) {\n    if(entity.other.name == 'Guide'){\n        this.entity.rigidbody.teleport(this.entity.getPosition(), entity.other.getEulerAngles());\n        this.entity.findByName('Group').lookAt(this.app.root.findByName('Camera').getPosition());\n    }\n\n};\n\nEnemyProto.prototype.splitter = function(splitter, height) {\n    for (var x  = 0; x < splitter.amount; x++){\n        var templateAsset = this.app.assets.get(52021162);\n        var instance = templateAsset.resource.instantiate();\n        instance.setPosition(this.entity.getPosition());\n        instance.setEulerAngles(this.entity.getEulerAngles());\n        instance.translateLocal(0, -height, (splitter.distance*x));\n        instance.script.enemyProto.callName = splitter.callName;\n        this.app.root.addChild(instance);\n        instance.enabled = true;\n    }\n\n};\n\n// swap method called for script hot-reloading\n// inherit your script state here\n// EnemyProto.prototype.swap = function(old) { };\n\n// to learn more about script anatomy, please read:\n// https://developer.playcanvas.com/en/user-manual/scripting/\n\n","// tower.js\nvar Tower = pc.createScript('tower');\n\nTower.attributes.add(\"config\", {type: \"asset\"});\n\n// initialize code called once per entity\nTower.prototype.initialize = function() {\n    if (this.config){\n        this.configMain = JSON.parse(this.config.resources[0]);\n    }\n    this.fireRate = 1; \n    this.radius = 1;\n    this.damage = 1;\n    this.engageList = [];\n    this.exclusionTags = [];\n    this.inclusionTags = ['enemy'];\n    this.engaged = false;\n    this.killCount = 0;\n    \n    \n    this.entity.children[0].collision.on('triggerenter',                  \n        function(entity) {this.enemyPush(entity);}, this);\n    this.entity.children[0].collision.on('triggerleave',                  \n        function(entity) {this.enemyPop(entity);}, this);\n    \n    this.entity.on('killCount', this.killTick, this);\n};\n\nTower.prototype.setUp = function(obj) {\n    this.fireRate = obj.fireRate; \n    this.radius = obj.radius;\n    this.damage = obj.damage;\n};\n\nTower.prototype.killTick = function() {\n    this.killCount += 1;\n};\n\n// update code called every frame\nTower.prototype.update = function(dt) {\n    if(this.entity.findByName('Radius')){\n        this.entity.findByName('Radius').collision.radius = this.radius;\n        this.entity.findByName('Radius').setLocalScale(this.radius*2, 0, this.radius*2);\n    }\n};\n\nTower.prototype.enemyPush = function(entity) {    \n    if(this.entity.name == 'Coop'){\n        if (this.inclusionTags.filter(x => entity.tags.has(x)).length > 0) {\n            this.entity.script.coop.health = pc.math.clamp(this.entity.script.coop.health - entity.script.enemyProto.harm, 0, 100);\n            entity.destroy();\n        }\n    }\n    else{\n    if (this.inclusionTags.filter(x => entity.tags.has(x)).length > 0) {\n        if (this.exclusionTags.filter(x => entity.tags.has(x)).length < 1) {\n           this.engageList.push(entity); \n        }\n    }\n    }\n};\n\nTower.prototype.enemyPop = function(entity) {\n    if (this.engageList.indexOf(entity) > -1){\n        this.engageList.splice(this.engageList.indexOf(entity), 1);\n    }\n};\n\n// swap method called for script hot-reloading\n// inherit your script state here\n// T.prototype.swap = function(old) { };\n\n// to learn more about script anatomy, please read:\n// https://developer.playcanvas.com/en/user-manual/scripting/\n\n","// UI.js\nvar Ui = pc.createScript('ui');\n\n// initialize code called once per entity\nUi.prototype.initialize = function() {\n    \n    this.set = [];\n    this.config = null;\n    this.focusEntity = null;\n    this.listUp = true;\n        \n    for (var i in this.entity.children) {\n    this.entity.children[i].element.on('mouseenter', function (event) {\n        this.app.root.findByName('Camera').script.mouseInput.sceneOrbit = false;\n    }, this);\n    this.entity.children[i].element.on('mouseleave', function (event) {\n        this.app.root.findByName('Camera').script.mouseInput.sceneOrbit = true;\n    }, this);\n    this.entity.children[i].element.on('touchstart', function (event) {\n        this.app.root.findByName('Camera').script.touchInput.sceneOrbit = false;\n    }, this);\n    this.entity.children[i].element.on('touchend', function (event) {\n        this.app.root.findByName('Camera').script.touchInput.sceneOrbit = true;\n    }, this);\n    }\n    \n    this.entity.findByName('Start Button').element.on('click', function (event) {\n        this.entity.findByName('Message Group').enabled = false;\n        this.app.root.findByName('Spawner').script.main.start();\n    }, this);\n    \n    this.populate();\n    \n    this.entity.findByName('Arrow').element.on('click', function (event) {\n        this.entity.findByName('Arrow').rotateLocal(0, 0, 180);\n        if(this.listUp === true){\n            this.entity.findByName('Tower Group').translateLocal(0, -400, 0);\n            this.listUp = false;\n        }\n        else{\n            this.entity.findByName('Tower Group').translateLocal(0, 400, 0);\n            this.listUp = true;\n        }\n    }, this);\n    \n    this.entity.findByName('Sell Button').element.on('click', function (event) {\n        if(this.focusEntity && this.config){\n            var ind = this.app.root.findByName(\"Coop\").script.coop.towersActive.indexOf(this.focusEntity);\n            this.entity.sound.play(\"Slot 2\");\n            this.app.root.findByName('Coop').script.coop.tokens += this.config.sellBack;\n            this.app.root.findByName(\"Coop\").script.coop.towersActive.splice(ind, 1);\n            this.focusEntity.destroy();\n            this.focusEntity = null;\n            this.config = null;\n        }\n    }, this);\n};\n\n// update code called every frame\nUi.prototype.update = function(dt) {\n    if(this.focusEntity === null){\n        this.entity.findByName('Info Group').enabled = false;\n        this.app.root.findByName('RadiusViewer').setPosition(0,4,0);\n        this.app.root.findByName('RadiusViewer').setLocalScale(1,1,1);\n    }\n    else{\n        this.entity.findByName('Info Group').enabled = true;\n        if(this.focusEntity.findByName('Radius')){\n            this.app.root.findByName('RadiusViewer').setPosition(this.focusEntity.getPosition().x, 10.7, this.focusEntity.getPosition().z);\n            this.app.root.findByName('RadiusViewer').setLocalScale(this.focusEntity.script.tower.radius*2, 0.1, this.focusEntity.script.tower.radius*2);\n        }\n        else{\n            this.app.root.findByName('RadiusViewer').setPosition(0,4,0);\n            this.app.root.findByName('RadiusViewer').setLocalScale(1,1,1);\n        }\n    }\n    this.entity.findByName('Tokens').element.text = \"Tokens: \" + this.app.root.findByName('Coop').script.coop.tokens;\n    this.entity.findByName('Health Bar').element.width = (this.app.root.findByName('Coop').script.coop.health/100) * 390;\n    this.hen(this.app.root.findByName('Coop').script.coop.hens);\n\n    if (this.config){\n        if(this.config.canSell === true){\n            this.entity.findByName('Info Card').enabled = true;\n            this.entity.findByName('SellBack').element.text = this.config.sellBack + \" Tokens\";\n        }\n        else{\n            this.entity.findByName('Info Card').enabled = false;\n        }\n    }\n};\n\n\nUi.prototype.hen = function(number) {\n     switch (number) {\n  case 3:\n    this.entity.findByName('Hens').element.texture = this.app.assets.get(52063655).resource;\n    break;\n  case 2:\n    this.entity.findByName('Hens').element.texture = this.app.assets.get(52063835).resource;\n    break;\n  case 1:\n    this.entity.findByName('Hens').element.texture = this.app.assets.get(52063846).resource;\n    break;\n  case 0:\n    this.entity.findByName('Hens').element.texture = this.app.assets.get(52063877).resource;\n    break;\n    }\n};\n\nUi.prototype.displayObject = function(object) {\n    \n    this.focusEntity = object;\n    \n    \n    if(object && object.script){\n        this.config = this.focusEntity.script.tower.configMain;\n        for (var e in this.set){\n            if (e < this.config.upgrades.length){\n                if (this.config.upgrades[e].owned === true){\n                    this.set[e].findByName('Status').element.text = \"OWNED\";\n                    this.set[e].button.active = false;\n                }\n                else if (this.config.upgrades[e].owned == \"exc\"){\n                    this.set[e].findByName('Status').element.text = \"LOCKED\";\n                    this.set[e].button.inactiveTint = new pc.Color(0.55, 0.55, 0.55);\n                    this.set[e].button.active = false;\n                }\n                else{\n                    this.set[e].findByName('Status').element.text = \"UPGRADE\";\n                    this.set[e].button.inactiveTint = new pc.Color(0.6, 0.86, 0.65);\n                    this.set[e].button.active = true;\n                }\n                \n                if (this.config.upgrades[e].linkList){\n                    this.set[e].findByName('Link').enabled = true;\n                }\n                else{\n                    this.set[e].findByName('Link').enabled = false;\n                }\n                this.set[e].enabled = true;\n                this.set[e].findByName('Name').element.text = this.config.upgrades[e].name;\n                this.set[e].findByName('Description').element.text = this.config.upgrades[e].description;\n                this.set[e].findByName('Cost').element.text = this.config.upgrades[e].cost + \" Tokens\";\n            }\n            else{\n                this.set[e].enabled = false;\n            }\n            \n        }\n        this.entity.findByName('Title').element.text = this.config.name;\n        \n    }\n};\n\nUi.prototype.populate = function() {\n    var main = this.entity.findByName('Upgrade Card');\n    \n    this.set.push(main);\n    \n    var onPlayerMove = function(index) {\n        console.log(x);\n    };\n    \n    for (var x = 1; x < 10; x++){\n        var y = main.clone();\n        this.set.push(y);\n        this.entity.findByName('Content').addChild(y);\n        y.translateLocal(0, -220*x, 0);\n        y.element.on('click', function (event) {\n        this.buttonEvent(event.element.entity);\n        }, this);\n    }\n    \n    main.element.on('click', function (event) {\n        this.buttonEvent(event.element.entity);\n        }, this);\n};\n\nUi.prototype.buttonEvent = function(entity) {\n\n    var cost = this.config.upgrades[this.set.indexOf(entity)].cost;\n    var list = this.config.upgrades[this.set.indexOf(entity)].linkList;\n    \n    if (cost <= this.app.root.findByName('Coop').script.coop.tokens && entity.button.active === true){\n        this.app.root.findByName('Coop').script.coop.tokens -= cost;\n        \n        entity.button.active = false;\n        this.config.upgrades[this.set.indexOf(entity)].owned = true;\n        entity.findByName('Status').element.text = \"OWNED\";\n        \n        if (list){\n            for(var n in list){\n                this.config.upgrades[list[n]].owned = 'exc';\n                this.set[list[n]].findByName('Status').element.text = \"LOCKED\";\n                this.set[list[n]].button.inactiveTint = new pc.Color(0.55, 0.55, 0.55);\n                this.set[list[n]].button.active = false;\n            }\n        }\n        \n        this.config.sellBack += Math.floor(cost*0.5);\n        this.focusEntity.fire('upgrade');\n        this.entity.sound.play(\"Slot 1\");\n    }\n    \n};\n\nUi.prototype.pushMessage = function(round, message) {\n    this.entity.findByName('Message Group').enabled = true;\n    this.entity.findByName('Round').element.text = \"Round: \" + round;\n    this.entity.findByName('Message').element.text = message;\n};\n// swap method called for script hot-reloading\n// inherit your script state here\n// Ui.prototype.swap = function(old) { };\n\n// to learn more about script anatomy, please read:\n// https://developer.playcanvas.com/en/user-manual/scripting/\n\n","// coop.js\nvar Coop = pc.createScript('coop');\n\n// initialize code called once per entity\nCoop.prototype.initialize = function() {\n    this.health = 100;\n    this.tokens = 1000;\n    this.hens = 3;\n    this.towersActive = [];\n};\n\n// update code called every frame\nCoop.prototype.update = function(dt) {\n    this.health = pc.math.clamp(this.health, 0, 100);\n    if (this.health < 1 && this.hens > 0){\n        this.health = 100;\n        this.hens -= 1;\n    }\n};\n\nCoop.prototype.tokenADD = function(amount) {\n    this.tokens += amount;\n};\n// swap method called for script hot-reloading\n// inherit your script state here\n// Coop.prototype.swap = function(old) { };\n\n// to learn more about script anatomy, please read:\n// https://developer.playcanvas.com/en/user-manual/scripting/\n\n","// main.js\nvar Main = pc.createScript('main');\n\nMain.attributes.add(\"configFile\", {type: \"asset\"});\n// initialize code called once per entity\nMain.prototype.initialize = function() {\n    this.trigger = 0;\n    this.active = false;\n    if (this.configFile){\n        this.config = JSON.parse(this.configFile.resources[0]);\n    }\n    this.index = 0;\n    this.sp_ind = 0;\n    this.round = this.config[0];\n    \n    this.app.root.findByName(\"UI\").script.ui.pushMessage(this.round.num, this.round.description);\n};\n\n// update code called every frame\nMain.prototype.update = function(dt) {\n    if(this.active === true){\n        if(this.round.spawns.length > this.sp_ind){\n            if(this.trigger < 0){\n                this.trigger = this.round.spawns[this.sp_ind].duration;\n                \n                if(this.round.spawns[this.sp_ind].amount == 1){\n                this.spawn(this.round.spawns[this.sp_ind]);\n                this.sp_ind += 1;\n                }\n                \n                else{\n                this.spawn(this.round.spawns[0]);\n                this.round.spawns[this.sp_ind].amount -= 1;\n                }\n                \n            }\n            else{\n                this.trigger -= dt;\n            }\n        }\n        else if(this.round.spawns.length <= this.sp_ind && this.app.root.find('name', 'Enemy').length < 1){\n            this.stop(this.round.num, this.round.description);\n        }\n    }\n};\n\nMain.prototype.stop = function(round, message) {\n    if(this.active === true){\n        this.index += 1;\n        this.round = this.config[this.index];\n        if(this.round){\n            this.app.root.findByName(\"UI\").script.ui.pushMessage(this.round.num, this.round.description);\n        }\n        else{\n            \n        }\n        this.active = false;\n    }    \n};\n\nMain.prototype.start = function() {\n    this.active = true;\n    this.sp_ind = 0; \n};\n\n\nMain.prototype.spawn = function(spawn) {\n    if (spawn.name !== 'wait'){\n        for (var x in this.entity.children){\n            var templateAsset = this.app.assets.get(52021162);\n            var instance = templateAsset.resource.instantiate();\n            instance.setPosition(this.entity.children[x].getPosition());\n            instance.setEulerAngles(this.entity.children[x].getEulerAngles());\n            instance.script.enemyProto.callName = spawn.name;\n            this.app.root.addChild(instance);\n            instance.enabled = true;\n        }\n    }\n    \n};\n// swap method called for script hot-reloading\n// inherit your script state here\n// Spawner.prototype.swap = function(old) { };\n\n// to learn more about script anatomy, please read:\n// https://developer.playcanvas.com/en/user-manual/scripting/\n\n","// summoner.js\nvar Summoner = pc.createScript('summoner');\n\nSummoner.attributes.add(\"asset_id\", {type: \"number\"});\nSummoner.attributes.add(\"cost\", {type: \"number\"});\nSummoner.attributes.add(\"name\", {type: \"string\"});\nSummoner.attributes.add(\"range\", {type: \"number\"});\n// initialize code called once per entity\nSummoner.prototype.initialize = function() {\n    this.canPlace = false;\n    this.def = null;\n    this.ray = new pc.Ray();\n    this.cameraEntity = this.app.root.findByName('Camera');\n    this.state = 'release';\n    this.entity.element.on('click', function (event) {\n        if(event.button === 0 && this.state == 'release'){\n            if(this.state == 'release'){\n                this.ready('init');\n            }\n        }\n    }, this);\n    this.entity.element.on('touchstart', function (event) {\n        if(this.state == 'release'){\n            this.ready('init');\n        }\n    }, this);\n    this.app.mouse.on(pc.EVENT_MOUSEMOVE, this.onMouseMove, this);\n    this.app.mouse.on(pc.EVENT_MOUSEDOWN, this.onMouseDown, this);\n    \n    if(this.app.touch){\n    this.app.touch.on(pc.EVENT_TOUCHSTART, this.onTouchMove, this);\n    this.app.touch.on(pc.EVENT_TOUCHEND, this.onTouchEnd, this);\n    }\n\n    this.entity.findByName('Cost').element.text = this.cost + \" Tokens\";\n    this.entity.findByName('Text').element.text = this.name;\n};\n\nSummoner.prototype.onMouseMove = function(event) {\n    if (this.state == 'dragging') {\n        \n    }\n    else{\n        this.app.root.findByName(\"Radius Previewer\").setPosition(0,0,0);\n        this.app.root.findByName(\"Radius Previewer\").setLocalScale(1,1,1);\n    }\n};\n\nSummoner.prototype.onMouseDown = function(event) {\n    if (this.state == 'dragging') {\n        if (event.button === 0) {\n            this.doRayCast(event);\n            this.ready('place');\n        }\n        else{\n            this.kill();\n            this.entity.button.active = true;\n        }\n    }\n};\n\nSummoner.prototype.onTouchMove = function(event) {\n    if (event.touches.length == 1) {\n        if (this.state == 'dragging' && this.canPlace == true) {\n            this.doRayCast(event.touches[0]);\n            this.ready('place');\n            this.canPlace = false;\n        }\n    }\n};\n\nSummoner.prototype.onTouchEnd = function(event) {\n    if (this.canPlace == false && this.state == 'dragging'){\n        this.canPlace = true;\n    }\n};\n\nSummoner.prototype.doRayCast = function (screenPosition) {\n    // Initialise the ray and work out the direction of the ray from the a screen position\n    var from = this.cameraEntity.getPosition();\n    // The vec3 to raycast to \n    var to = this.cameraEntity.camera.screenToWorld(screenPosition.x, screenPosition.y, this.cameraEntity.camera.farClip);\n\n    // Raycast between the two points\n    var results = this.app.systems.rigidbody.raycastAll(from, to);\n    var result = null;\n    \n    var dist = 1000;\n    for(var i in results){\n        if (results[i].entity.name == \"Map\" || results[i].entity.name == \"No Zone\"){\n            if (results[i].entity.getPosition().y < dist){\n                result = results[i];\n                dist = results[i].entity.getPosition().y;\n            } \n        }\n    }\n    \n    if (result && this.def) {\n        this.def.rigidbody.teleport(result.point.x, result.point.y+3, result.point.z);\n        this.app.root.findByName('Radius Previewer').setPosition(this.def.getPosition().x, 10.8, this.def.getPosition().z);\n        this.app.root.findByName('Radius Previewer').setLocalScale(this.range*2, 0.1, this.range*2);\n        \n        if(result.entity.name == \"No Zone\"){\n            this.app.root.findByName('Radius Previewer').model.meshInstances[0].material = this.app.assets.get(52248028).resource;\n            this.canPlace = false;\n        }\n        else{\n            this.app.root.findByName('Radius Previewer').model.meshInstances[0].material = this.app.assets.get(52187915).resource;\n            this.canPlace = true;\n        }\n    }  \n};\n\n\n// update code called every frame\nSummoner.prototype.update = function(dt) {\n    if(this.app.keyboard.wasPressed(pc.KEY_ESCAPE)){\n        this.kill();\n    }\n\n};\n\nSummoner.prototype.ready = function(mode) {\n    var amount = this.app.root.findByName(\"Coop\").script.coop.tokens;\n    if(mode == 'init' && amount >= this.cost){        \n        var templateAsset = this.app.assets.get(this.asset_id);\n        this.def = templateAsset.resource.instantiate();\n        this.app.root.addChild(this.def);\n        this.def.setPosition(0, 0, -17);\n        this.entity.button.active = false;\n        this.state = 'dragging';\n        \n    }\n    \n    if(mode == 'place'){\n        \n        if (this.def && this.canPlace === true){ \n            this.def.script.enabled = true;\n            for (var x in this.def.script.scripts){\n                this.def.script.scripts[x].initialize();\n            }\n            this.state = 'release';\n            this.app.root.findByName(\"Coop\").script.coop.tokens -= this.cost;\n            this.app.root.findByName(\"UI\").sound.play(\"Slot 3\");\n            if (this.app.root.findByName(\"Coop\").script.coop.towersActive.length < 1){\n                this.cameraEntity.script.clickToHighlight.focusEntity(this.def); \n            }\n            this.app.root.findByName(\"Coop\").script.coop.towersActive.push(this.def);\n            this.def = null;\n            this.entity.button.active = true;\n        }\n    }\n\n};\n\nSummoner.prototype.kill = function() {\n    if(this.def){\n        this.def.destroy();\n        this.def = null;\n        this.state = \"release\";\n    }\n};\n\n\n// swap method called for script hot-reloading\n// inherit your script state here\n// Summoner.prototype.swap = function(old) { };\n\n// to learn more about script anatomy, please read:\n// https://developer.playcanvas.com/en/user-manual/scripting/\n\n","// frag.js\nvar Frag = pc.createScript('frag');\n\n// initialize code called once per entity\nFrag.prototype.initialize = function() {\n    this.damage = 0;\n    this.endRadius = 0;\n    this.currentRadius = 0.1;\n    this.initEntity = null;\n    this.entity.collision.on('triggerenter', function (event) {\n        this.hurt(event);\n    }, this);\n    this.entity.collision.radius = 6;\n    this.effect = null;\n    \n};\n\n// update code called every frame\nFrag.prototype.update = function(dt) {\n    if(this.currentRadius > 6){\n        this.entity.destroy();\n    }\n    else{\n        this.currentRadius += 1.5;\n        console.log(this.initEntity);\n        this.entity.setLocalScale(this.currentRadius*2, this.currentRadius*2, this.currentRadius*2);\n    }\n};\n\nFrag.prototype.hurt = function(result) {\n    if(result && result.script && result.script.enemyProto){\n        result.script.enemyProto.applyDamage(this.damage, this.initEntity);\n        if(this.effect){\n            result.script.enemyProto.applyEffect(this.effect, this.initEntity);\n        }\n    }\n};\n\n// swap method called for script hot-reloading\n// inherit your script state here\n// Frag.prototype.swap = function(old) { };\n\n// to learn more about script anatomy, please read:\n// https://developer.playcanvas.com/en/user-manual/scripting/\n\n","// Turret.js\nvar Turret = pc.createScript('turret');\n\n\n// initialize code called once per entity\nTurret.prototype.initialize = function() {\n    this.fireTime = 0;\n    this.bulletTime = 0;\n    this.bullet = [];\n    this.entity.children[1].animation.play(\"Turret(Base) Idle\");\n    this.entity.children[1].animation.loop = true;\n    this.entity.on('upgrade', this.checkUpgrades, this);\n    this.entity.script.tower.setUp({fireRate: 5, radius: 25, damage: 36});\n    \n    this.memento = -1;\n};\n\n// update code called every frame\nTurret.prototype.update = function(dt) {\n    var startColor = new pc.Color(1, 1, 1);\n    var endColor = new pc.Color(1, 1, 1);\n    \n    if (this.fireTime < 0){\n        if (this.entity.script.tower.engageList.length > 0) {\n            \n            this.entity.script.tower.engaged = true;\n            var pos = this.entity.script.tower.engageList[this.entity.script.tower.engageList.length-1].getLocalPosition();\n            this.entity.children[1].lookAt(pos.x, pos.y, pos.z); \n            this.entity.children[1].animation.play(\"Turret(Base) Fire\");\n            this.entity.sound.play(\"Slot 1\");\n            this.bullet = this.fireRound();\n  \n            if(this.memento >= 1){\n                if(this.memento == 1){\n                    this.entity.children[1].model.meshInstances[1].material = this.app.assets.get(51881129).resource;\n                }\n                this.entity.sound.play(\"Slot 2\");\n                this.memento -= 1;\n            }\n            if(this.memento > -1 && this.memento < 1){this.memento -= 0.5;}\n\n            this.bulletTime = 0.2;\n            this.resetFire();\n            }\n        \n        else{\n        if (this.entity.script.tower.engaged === true){\n            this.entity.script.tower.engaged = false;\n            this.resetFire();\n            }\n        }\n    }\n    \n    else{\n        this.fireTime -= dt;\n    }\n    \n    if (this.bulletTime > 0){\n        endColor.a = this.bulletTime / 0.2;\n        startColor.a = (this.bulletTime / 0.2)-2;\n        this.app.renderLine(this.bullet[0], this.bullet[1], startColor, endColor);\n        this.bulletTime -= dt;\n    }\n        \n    \n};\n\n\nTurret.prototype.fireRound = function() {\n    if (this.accelerometer){\n        this.entity.script.tower.fireRate = pc.math.clamp(this.entity.script.tower.fireRate+0.2, this.accelerometer.base, this.accelerometer.max);\n    }\n    \n    var boost = 1;\n    \n    if (this.memento > 0){\n        boost = 4;\n    }\n    \n    var from = this.entity.children[1].getPosition();\n    var to = new pc.Vec3();\n    to.add2(from, this.entity.children[1].children[0].forward.mulScalar(this.entity.script.tower.radius+10));\n\n    var results = this.app.systems.rigidbody.raycastAll(from, to);\n    \n    for (var x in results){\n        var result = results[x];\n        if (result &&  result.entity && result.entity.tags.has('shield')){\n            return([this.entity.children[1].children[0].getPosition(), result.entity.getPosition(), false]);\n        }\n        if (result &&  result.entity.script && result.entity.script.enemyProto){\n            if(this.frag){\n                var templateAsset = this.app.assets.get(52218912);\n                var inst = templateAsset.resource.instantiate();\n                this.app.root.addChild(inst);\n                inst.script.enabled = true;\n                inst.setPosition(result.entity.getPosition());\n                inst.script.frag.damage = this.entity.script.tower.damage * boost;\n                inst.script.frag.initEntity = this.entity;\n                inst.script.frag.endRadius = 8;\n                inst.script.frag.effect = this.debuff;\n            }\n            else{\n                result.entity.script.enemyProto.applyDamage(this.entity.script.tower.damage * boost, this.entity);\n                if(this.debuff){\n                    result.entity.script.enemyProto.applyEffect(this.debuff, this.entity);\n                }\n            }\n            \n            \n            return([this.entity.children[1].children[0].getPosition(), result.entity.getPosition(), true]);\n        }            \n    }\n    return([this.entity.children[1].children[0].getPosition(), to, false]);\n};\n\nTurret.prototype.resetFire = function() {\n    if (this.entity.script.tower.engaged === true){\n        this.entity.children[1].animation.speed = this.entity.script.tower.fireRate;\n        this.entity.children[1].animation.loop = false;\n        this.fireTime = this.entity.children[1].animation.duration / this.entity.script.tower.fireRate;\n    }\n    if (this.entity.script.tower.engaged === false){\n        if (this.accelerometer){\n            this.entity.script.tower.fireRate = this.accelerometer.base;\n        }\n        this.entity.children[1].animation.speed = 1;\n        this.entity.children[1].animation.loop = true;\n        this.entity.children[1].animation.play(\"Turret(Base) Idle\");\n        this.fireTime = 0;\n    }\n\n};\n\nTurret.prototype.checkUpgrades = function() {\n    \n    if (this.entity.script.tower.configMain.upgrades[3].owned === true){\n        this.entity.children[1].model.asset = this.app.assets.get(52213615);\n        this.entity.children[1].model.meshInstances[2].material = this.app.assets.get(52214683).resource;\n        this.debuff = {name: 'rot', duration: 3};\n    }\n    if (this.entity.script.tower.configMain.upgrades[4].owned === true){\n        this.entity.children[1].model.asset = this.app.assets.get(52213615);\n        this.entity.children[1].model.meshInstances[2].material = this.app.assets.get(52216470).resource;\n        this.debuff = {name: 'slow', duration: 2};\n    }\n    if (this.entity.script.tower.configMain.upgrades[5].owned === true){\n        this.entity.children[1].model.asset = this.app.assets.get(52213615);\n        this.entity.children[1].model.meshInstances[2].material = this.app.assets.get(52214437).resource;\n        this.entity.on('killCount', this.memMori, this);\n    }\n    \n    if (this.entity.script.tower.configMain.upgrades[0].owned === true){\n        this.entity.children[1].model.meshInstances[4].material = this.app.assets.get(52216574).resource;\n        this.entity.script.tower.radius = 40;\n    }\n    if (this.entity.script.tower.configMain.upgrades[1].owned === true){\n        this.entity.children[1].model.meshInstances[5].material = this.app.assets.get(51982608).resource;\n        this.accelerometer = {base: 5.5, max: 10};\n    }\n    if (this.entity.script.tower.configMain.upgrades[2].owned === true){\n        this.entity.children[1].model.meshInstances[6].material = this.app.assets.get(51881129).resource;\n        this.frag = true;\n    }\n\n};\n\nTurret.prototype.memMori = function() {\n    if(this.memento === -1){\n        this.entity.children[1].model.meshInstances[1].material = this.app.assets.get(52276431).resource;\n        this.memento = 6;\n    }\n};\n\n\n\n// swap method called for script hot-reloading\n// inherit your script state here\n// TurretEngage.prototype.swap = function(old) { };\n\n// to learn more about script anatomy, please read:\n// https://developer.playcanvas.com/en/user-manual/scripting/\n\n// initialize code called once per entity\n\n\n","// feather.js\nvar Feather = pc.createScript('feather');\n\n// initialize code called once per entity\nFeather.prototype.initialize = function() {\n    this.entity.collision.on('collisionstart', function (event) {\n        this.hurt(event.other);\n    }, this);\n    this.damage = 0;\n    this.initEntity = null;\n    this.duration = 0.6;\n    this.scale = 1;\n    this.hitCount = 0;\n    this.behavior = \"none\";\n    this.rot = 30;\n    this.dir = 1;\n    this.limit = 0.4; \n};\n\n// update code called every frame\nFeather.prototype.update = function(dt) {\n    this.entity.children[0].rotateLocal(0, this.rot*this.scale, 0);\n    this.forceVal = this.entity.forward.clone().scale(this.scale);\n    if (this.dir > 0){\n       this.entity.rigidbody.teleport(this.entity.getPosition().add(this.forceVal));\n    }\n    else{\n       this.entity.rigidbody.teleport(this.entity.getPosition().sub(this.forceVal)); \n    }\n    \n    \n    if (this.duration < 0){\n       this.entity.destroy();\n    }\n    else{\n        if (this.duration < 0.1 && this.dir > 0 && this.behavior == \"return\"){\n            this.duration = (this.limit * this.scale) + 0.1;\n            this.dir = -1;\n        } \n        if (this.duration < (this.limit * this.scale) && this.behavior == \"fork\"){\n            this.behavior = \"none\";\n            this.fireRound();\n        }\n        \n        this.duration -= dt;\n    }\n    \n};\n\nFeather.prototype.hurt = function(result) {\n    if(result && result.script && result.script.enemyProto){\n        result.script.enemyProto.applyDamage(this.damage, this.initEntity);\n        if(this.hitCount === 0){\n            this.entity.destroy();\n        }\n    }   \n  \n};\n\nFeather.prototype.fireRound = function() {\n    var x = 2;\n        var templateAsset = this.app.assets.get(52300348);\n        var instance = templateAsset.resource.instantiate();\n        instance.setPosition(this.entity.getPosition());\n        instance.setEulerAngles(this.entity.getEulerAngles().x, (this.entity.getEulerAngles().y-20) + (x*20), this.entity.getEulerAngles().z);\n        instance.translateLocal(0, -1, 0);\n        this.app.root.addChild(instance);\n        instance.children[0].model.meshInstances[0].material = this.entity.children[0].model.meshInstances[0].material;\n        instance.script.feather.damage = this.damage;\n        instance.script.feather.initEntity = this.initEntity;  \n        instance.script.feather.scale = this.scale;  \n        instance.script.feather.duration = this.duration;     \n};\n\n// swap method called for script hot-reloading\n// inherit your script state here\n// Feather.prototype.swap = function(old) { };\n\n// to learn more about script anatomy, please read:\n// https://developer.playcanvas.com/en/user-manual/scripting/\n\n"]}